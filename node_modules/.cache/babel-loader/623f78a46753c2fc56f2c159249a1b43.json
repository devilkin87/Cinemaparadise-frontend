{"ast":null,"code":"import API from '../../API';\nimport { addWatchlistAction, deleteWatchlistAction, fetchWatchlistAction } from './action';\nconst api = new API();\nconst WATCHLIST_KEY = 'WATCHLIST_KEY';\nexport const fetchFromLocalStorage = () => {\n  return async dispatch => {\n    let watchlistJSON = localStorage.getItem(WATCHLIST_KEY);\n    let watchlist = [];\n\n    if (watchlistJSON) {\n      watchlist = JSON.parse(watchlistJSON);\n    }\n\n    dispatch(fetchWatchlistAction(watchlist));\n  };\n};\nexport const addWatchlist = image => {\n  return async (dispatch, getState) => {\n    let prevWatchlist = getState().watchlists.list;\n    const nextWatchlist = [image, ...prevWatchlist];\n    setToLocalStorage(nextWatchlist);\n    dispatch(addWatchlistAction(nextWatchlist));\n  };\n};\nexport const deleteWatchlist = id => {\n  return async (dispatch, getState) => {\n    let prevWatchlist = getState().watchlists.list;\n    const nextWatchlist = prevWatchlist.filter(image => image.id != id);\n    setToLocalStorage(nextWatchlist);\n    dispatch(deleteWatchlistAction(nextWatchlist));\n  };\n};\n\nconst setToLocalStorage = watchlists => {\n  localStorage.setItem(WATCHLIST_KEY, JSON.stringify(watchlists));\n};","map":{"version":3,"names":["API","addWatchlistAction","deleteWatchlistAction","fetchWatchlistAction","api","WATCHLIST_KEY","fetchFromLocalStorage","dispatch","watchlistJSON","localStorage","getItem","watchlist","JSON","parse","addWatchlist","image","getState","prevWatchlist","watchlists","list","nextWatchlist","setToLocalStorage","deleteWatchlist","id","filter","setItem","stringify"],"sources":["/Users/techi.s./Desktop/CinemaParadise-main/frontend/src/reducks/watchlists/operations.js"],"sourcesContent":["import API from '../../API';\nimport { addWatchlistAction, deleteWatchlistAction, fetchWatchlistAction } from './action';\n\nconst api = new API();\nconst WATCHLIST_KEY = 'WATCHLIST_KEY';\n\nexport const fetchFromLocalStorage = () => {\n    return async dispatch => {\n        let watchlistJSON = localStorage.getItem(WATCHLIST_KEY);\n        let watchlist = [];\n        if (watchlistJSON) {\n            watchlist = JSON.parse(watchlistJSON);\n        }\n        dispatch(fetchWatchlistAction(watchlist));\n    };\n};\n\nexport const addWatchlist = image => {\n    return async (dispatch, getState) => {\n        let prevWatchlist = getState().watchlists.list;\n        const nextWatchlist = [image, ...prevWatchlist];\n        setToLocalStorage(nextWatchlist);\n        dispatch(addWatchlistAction(nextWatchlist));\n    };\n};\n\nexport const deleteWatchlist = id => {\n    return async (dispatch, getState) => {\n        let prevWatchlist = getState().watchlists.list;\n        const nextWatchlist = prevWatchlist.filter(image => image.id != id);\n        setToLocalStorage(nextWatchlist);\n        dispatch(deleteWatchlistAction(nextWatchlist));\n    };\n};\n\nconst setToLocalStorage = watchlists => {\n    localStorage.setItem(WATCHLIST_KEY, JSON.stringify(watchlists));\n};\n"],"mappings":"AAAA,OAAOA,GAAP,MAAgB,WAAhB;AACA,SAASC,kBAAT,EAA6BC,qBAA7B,EAAoDC,oBAApD,QAAgF,UAAhF;AAEA,MAAMC,GAAG,GAAG,IAAIJ,GAAJ,EAAZ;AACA,MAAMK,aAAa,GAAG,eAAtB;AAEA,OAAO,MAAMC,qBAAqB,GAAG,MAAM;EACvC,OAAO,MAAMC,QAAN,IAAkB;IACrB,IAAIC,aAAa,GAAGC,YAAY,CAACC,OAAb,CAAqBL,aAArB,CAApB;IACA,IAAIM,SAAS,GAAG,EAAhB;;IACA,IAAIH,aAAJ,EAAmB;MACfG,SAAS,GAAGC,IAAI,CAACC,KAAL,CAAWL,aAAX,CAAZ;IACH;;IACDD,QAAQ,CAACJ,oBAAoB,CAACQ,SAAD,CAArB,CAAR;EACH,CAPD;AAQH,CATM;AAWP,OAAO,MAAMG,YAAY,GAAGC,KAAK,IAAI;EACjC,OAAO,OAAOR,QAAP,EAAiBS,QAAjB,KAA8B;IACjC,IAAIC,aAAa,GAAGD,QAAQ,GAAGE,UAAX,CAAsBC,IAA1C;IACA,MAAMC,aAAa,GAAG,CAACL,KAAD,EAAQ,GAAGE,aAAX,CAAtB;IACAI,iBAAiB,CAACD,aAAD,CAAjB;IACAb,QAAQ,CAACN,kBAAkB,CAACmB,aAAD,CAAnB,CAAR;EACH,CALD;AAMH,CAPM;AASP,OAAO,MAAME,eAAe,GAAGC,EAAE,IAAI;EACjC,OAAO,OAAOhB,QAAP,EAAiBS,QAAjB,KAA8B;IACjC,IAAIC,aAAa,GAAGD,QAAQ,GAAGE,UAAX,CAAsBC,IAA1C;IACA,MAAMC,aAAa,GAAGH,aAAa,CAACO,MAAd,CAAqBT,KAAK,IAAIA,KAAK,CAACQ,EAAN,IAAYA,EAA1C,CAAtB;IACAF,iBAAiB,CAACD,aAAD,CAAjB;IACAb,QAAQ,CAACL,qBAAqB,CAACkB,aAAD,CAAtB,CAAR;EACH,CALD;AAMH,CAPM;;AASP,MAAMC,iBAAiB,GAAGH,UAAU,IAAI;EACpCT,YAAY,CAACgB,OAAb,CAAqBpB,aAArB,EAAoCO,IAAI,CAACc,SAAL,CAAeR,UAAf,CAApC;AACH,CAFD"},"metadata":{},"sourceType":"module"}